const translations = {
  zh: {
    title: "DeepSeek AI ä½¿ç”¨è¯´æ˜",
    subtitle: "è®© AI åŠ©æ‰‹ä¸ºæ‚¨çš„ç½‘é¡µæµè§ˆä½“éªŒå¢æ·»æ™ºæ…§",
    quickStart: "å¿«é€Ÿå¼€å§‹",
    chromeInstall: "Chrome å•†åº—å®‰è£…",
    chromeDesc: "ä» Chrome ç½‘ä¸Šåº”ç”¨åº—å®‰è£…æ‰©å±•",
    edgeInstall: "Edge å•†åº—å®‰è£…",
    edgeDesc: "ä» Edge ç½‘ä¸Šåº”ç”¨åº—å®‰è£…æ‰©å±•",
    deepseekWebsite: "DeepSeek å®˜ç½‘",
    deepseekDesc: "è®¿é—® DeepSeek AI å®˜æ–¹ç½‘ç«™",
    apiKey: "è·å– API Key",
    apiDesc: "åœ¨ DeepSeek å¹³å°è·å–æ‚¨çš„ API å¯†é’¥",
    shortcuts: "å¿«æ·é”®è®¾ç½®",
    shortcutsDesc: "è‡ªå®šä¹‰æ‰©å±•å¿«æ·é”®",
    github: "GitHub ä»“åº“",
    githubDesc: "æŸ¥çœ‹æºä»£ç å’Œæäº¤å»ºè®®",
    installationSteps: [
      "åœ¨æµè§ˆå™¨ä¸­å®‰è£… DeepSeek AI æ‰©å±•",
      "ç‚¹å‡»å·¥å…·æ ä¸­çš„æ‰©å±•å›¾æ ‡",
      "è¾“å…¥æ‚¨çš„ DeepSeek API å¯†é’¥",
      "é€‰æ‹©æ‚¨åå¥½çš„å›ç­”è¯­è¨€",
      "å¼€å¯å¿«æ·æŒ‰é’®åŠŸèƒ½",
      "è®¾ç½®ä½ åå¥½çš„å¿«æ·é”®",
      "åœ¨ä»»æ„ç½‘é¡µä¸Šé€‰æ‹©æ–‡æœ¬ï¼Œå¼€å§‹ä¸ AI å¯¹è¯ï¼",
    ],
    usage: "ä½¿ç”¨æ–¹æ³•",
    quickButton: "å¿«æ·æŒ‰é’®ä½¿ç”¨",
    quickButtonDesc: "åœ¨æ‰©å±•è®¾ç½®ä¸­å¼€å¯å¿«æ·æŒ‰é’®åï¼Œé€‰ä¸­ç½‘é¡µæ–‡æœ¬æ—¶ä¼šè‡ªåŠ¨æ˜¾ç¤ºä¸€ä¸ªä¾¿æ·çš„ AI æŒ‰é’®ã€‚ç‚¹å‡»è¯¥æŒ‰é’®å³å¯å¿«é€Ÿå‘¼å‡ºä¼šè¯çª—å£ï¼Œè®©æ‚¨çš„æ“ä½œæ›´åŠ æµç•…ã€‚",
    shortcutUsage: "å¿«æ·é”®ä½¿ç”¨",
    shortcutUsageDesc:
      "æ— è®ºæ˜¯å¦é€‰ä¸­æ–‡æœ¬ï¼Œéƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨è‡ªå®šä¹‰å¿«æ·é”®å‘¼å‡ºå¯¹è¯çª—å£ã€‚",
    features: "åŠŸèƒ½ç‰¹ç‚¹",
    smartChat: "æ™ºèƒ½å¯¹è¯",
    smartChat1: "â€¢ æ”¯æŒå¤šè½®å¯¹è¯ï¼Œè®°ä½ä¸Šä¸‹æ–‡",
    smartChat2: "â€¢ å®æ—¶æµå¼å“åº”ï¼Œæ‰“å­—æœºæ•ˆæœ",
    smartChat3: "â€¢ æ”¯æŒé‡æ–°ç”Ÿæˆå›ç­”",
    uiInteraction: "ç•Œé¢äº¤äº’",
    uiInteraction1: "â€¢ å¯æ‹–æ‹½è°ƒæ•´çª—å£ä½ç½®å’Œå¤§å°",
    uiInteraction2: "â€¢ æ”¯æŒ Markdown æ ¼å¼åŒ–æ˜¾ç¤º",
    uiInteraction3: "â€¢ æ”¯æŒ LaTeX æ•°å­¦å…¬å¼æ¸²æŸ“",
    uiInteraction4: "â€¢ ä»£ç å—ä¸€é”®å¤åˆ¶",
    uiInteraction5: "â€¢ æ”¯æŒä»£ç é«˜äº®",
    personalization: "ä¸ªæ€§åŒ–è®¾ç½®",
    personalization1: "â€¢ è‡ªå®šä¹‰AIå›å¤è¯­è¨€åå¥½",
    personalization2: "â€¢ æ·±è‰²æ¨¡å¼è‡ªåŠ¨é€‚é…",
    personalization3: "â€¢ å¯é…ç½®å¿«æ·é”®",
    tips: "ä½¿ç”¨æŠ€å·§",
    tip1: "ğŸ’¡ å¯è‡ªå®šä¹‰å¿«æ·é”®ä»¥æ›´å¿«åœ°æ‰“å¼€å¯¹è¯çª—å£",
    tip2: "ğŸ’¡ ç‚¹å‡»ä»£ç å—å³ä¸Šè§’çš„å¤åˆ¶æŒ‰é’®ï¼Œå¯ä»¥å¿«é€Ÿå¤åˆ¶ä»£ç ç‰‡æ®µ",
    tip3: "ğŸ’¡ å¦‚æœå¯¹ AI çš„å›ç­”ä¸æ»¡æ„ï¼Œå¯ä»¥ç‚¹å‡»é‡æ–°ç”ŸæˆæŒ‰é’®è·å–æ–°çš„ç­”æ¡ˆ",
    feedback: "åé¦ˆä¸æ”¯æŒ",
    feedbackDesc:
      "å¦‚æœæ‚¨å–œæ¬¢ DeepSeek AI æ‰©å±•ï¼Œæ¬¢è¿åœ¨ Chrome ç½‘ä¸Šåº”ç”¨å•†åº—è¯„åˆ†å’Œè¯„è®ºï¼ŒæœŸå¾…æ‚¨çš„åé¦ˆï¼",
    chromeFeedback: "å‰å¾€ Chrome å•†åº—",
    chromeFeedbackDesc: "ä¸º DeepSeek AI è¯„åˆ†å’Œè¯„è®º",
    privacy: "éšç§è¯´æ˜",
    privacyDesc:
      "é‡è§†æ‚¨çš„éšç§ã€‚DeepSeek AI æ‰©å±•åªä¼šåœ¨å¿…è¦æ—¶å‘é€æ‚¨é€‰ä¸­çš„æ–‡æœ¬åˆ° APIï¼Œä¸ä¼šæ”¶é›†æˆ–å­˜å‚¨ä»»ä½•å…¶ä»–ä¸ªäººä¿¡æ¯ã€‚æ‚¨çš„ API å¯†é’¥ä»…ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­ã€‚",
  },
  en: {
    title: "DeepSeek AI User Guide",
    subtitle: "Enhance your web browsing experience with AI assistance",
    quickStart: "Quick Start",
    chromeInstall: "Install from Chrome Web Store",
    chromeDesc: "Install the extension from Chrome Web Store",
    edgeInstall: "Install from Edge Add-ons",
    edgeDesc: "Install the extension from Edge Add-ons",
    deepseekWebsite: "DeepSeek Website",
    deepseekDesc: "Visit the official DeepSeek AI website",
    apiKey: "Get API Key",
    apiDesc: "Obtain your API key on the DeepSeek platform",
    shortcuts: "Shortcut Settings",
    shortcutsDesc: "Customize extension shortcuts",
    github: "GitHub Repository",
    githubDesc: "View source code and submit suggestions",
    installationSteps: [
      "Install the DeepSeek AI extension in your browser",
      "Click the extension icon in the toolbar",
      "Enter your DeepSeek API key",
      "Select your preferred response language",
      "Enable the Quick Button feature",
      "Set your preferred shortcut keys",
      "Select text on the webpage to start a conversation with AI!",
    ],
    usage: "Usage",
    quickButton: "Quick Button Usage",
    quickButtonDesc: "When the Quick Button is enabled in extension settings, an AI button will automatically appear when you select text on a webpage. Click this button to quickly open the chat window for a smoother experience.",
    shortcutUsage: "Shortcut Usage",
    shortcutUsageDesc:
      "Whether or not text is selected, you can directly use custom shortcuts to bring up the dialog window.",
    features: "Features",
    smartChat: "Smart Chat",
    smartChat1: "â€¢ Supports multi-turn conversations with context memory",
    smartChat2: "â€¢ Real-time streaming responses with typewriter effect",
    smartChat3: "â€¢ Supports regenerating responses",
    uiInteraction: "UI Interaction",
    uiInteraction1: "â€¢ Draggable and resizable window",
    uiInteraction2: "â€¢ Supports Markdown formatting",
    uiInteraction3: "â€¢ Supports LaTeX math rendering",
    uiInteraction4: "â€¢ One-click code block copying",
    uiInteraction5: "â€¢ Supports code highlighting",
    personalization: "Personalization",
    personalization1: "â€¢ Customize AI response language preference.",
    personalization2: "â€¢ Automatic dark mode adaptation",
    personalization3: "â€¢ Configurable shortcuts",
    tips: "Tips",
    tip1: "ğŸ’¡ Customizable shortcuts for faster opening of the chat window.",
    tip2: "ğŸ’¡ Click the copy button on the code block to quickly copy the code snippet.",
    tip3: "ğŸ’¡ If you're not satisfied with the AI's response, click the regenerate button to get a new answer.",
    feedback: "Feedback & Support",
    feedbackDesc:
      "If you like the DeepSeek AI extension, please rate and review it on the Chrome Web Store. We look forward to your feedback!",
    chromeFeedback: "Visit Chrome Web Store",
    chromeFeedbackDesc: "Rate and review DeepSeek AI",
    privacy: "Privacy Policy",
    privacyDesc:
      "We value your privacy. The DeepSeek AI extension only sends selected text to the API when necessary and does not collect or store any other personal information. Your API key is stored locally in your browser.",
  },
};

let currentLang = "en";

const toggleLanguage = () => {
  // ç§»é™¤console.log("toggleLanguage")è¿™ç§ç®€å•çš„æ—¥å¿—
  console.log("Current language:", currentLang);
  currentLang = currentLang === "zh" ? "en" : "zh";
  console.log("Switching to:", currentLang);

  // ç¡®ä¿translationså¯¹è±¡ä¸­æœ‰å¯¹åº”çš„è¯­è¨€æ•°æ®
  const langData = translations[currentLang];
  if (!langData) {
    console.error("No translations found for", currentLang);
    return;
  }

  try {
    updateContent();
    console.log("Language switch completed");
  } catch (err) {
    console.error("Error updating content:", err);
  }
};

const updateContent = () => {
  const langData = translations[currentLang];
  document.getElementById("title").textContent = langData.title;
  document.getElementById("subtitle").textContent = langData.subtitle;
  document.getElementById("quick-start").textContent = langData.quickStart;
  document.getElementById("chrome-install").textContent =
    langData.chromeInstall;
  document.getElementById("chrome-desc").textContent = langData.chromeDesc;
  document.getElementById("edge-install").textContent = langData.edgeInstall;
  document.getElementById("edge-desc").textContent = langData.edgeDesc;
  document.getElementById("deepseek-website").textContent =
    langData.deepseekWebsite;
  document.getElementById("deepseek-desc").textContent = langData.deepseekDesc;
  document.getElementById("api-key").textContent = langData.apiKey;
  document.getElementById("api-desc").textContent = langData.apiDesc;
  document.getElementById("shortcuts").textContent = langData.shortcuts;
  document.getElementById("shortcuts-desc").textContent =
    langData.shortcutsDesc;
  document.getElementById("github").textContent = langData.github;
  document.getElementById("github-desc").textContent = langData.githubDesc;

  const steps = document.querySelectorAll("#installation-steps li");
  steps.forEach((step, index) => {
    step.textContent = langData.installationSteps[index];
  });

  document.getElementById("usage").textContent = langData.usage;
  document.getElementById("quick-button").textContent = langData.quickButton;
  document.getElementById("quick-button-desc").textContent = langData.quickButtonDesc;
  document.getElementById("shortcut-usage").textContent =
    langData.shortcutUsage;
  document.getElementById("shortcut-usage-desc").textContent =
    langData.shortcutUsageDesc;

  document.getElementById("features").textContent = langData.features;
  document.getElementById("smart-chat").textContent = langData.smartChat;
  document.getElementById("smart-chat-1").textContent = langData.smartChat1;
  document.getElementById("smart-chat-2").textContent = langData.smartChat2;
  document.getElementById("smart-chat-3").textContent = langData.smartChat3;
  document.getElementById("ui-interaction").textContent =
    langData.uiInteraction;
  document.getElementById("ui-interaction-1").textContent =
    langData.uiInteraction1;
  document.getElementById("ui-interaction-2").textContent =
    langData.uiInteraction2;
  document.getElementById("ui-interaction-3").textContent =
    langData.uiInteraction3;
  document.getElementById("ui-interaction-4").textContent =
    langData.uiInteraction4;
  document.getElementById("ui-interaction-5").textContent =
    langData.uiInteraction5;
  document.getElementById("personalization").textContent =
    langData.personalization;
  document.getElementById("personalization-1").textContent =
    langData.personalization1;
  document.getElementById("personalization-2").textContent =
    langData.personalization2;
  document.getElementById("personalization-3").textContent =
    langData.personalization3;

  document.getElementById("tips").textContent = langData.tips;
  document.getElementById("tip-1").textContent = langData.tip1;
  document.getElementById("tip-2").textContent = langData.tip2;
  document.getElementById("tip-3").textContent = langData.tip3;

  document.getElementById("feedback").textContent = langData.feedback;
  document.getElementById("feedback-desc").textContent = langData.feedbackDesc;
  document.getElementById("chrome-feedback").textContent =
    langData.chromeFeedback;
  document.getElementById("chrome-feedback-desc").textContent =
    langData.chromeFeedbackDesc;

  document.getElementById("privacy").textContent = langData.privacy;
  document.getElementById("privacy-desc").textContent = langData.privacyDesc;
};

document.addEventListener("DOMContentLoaded", () => {
  const langToggleBtn = document.getElementById("language-toggle");
  if (langToggleBtn) {
    langToggleBtn.addEventListener("click", (e) => {
      e.preventDefault(); // é˜²æ­¢å¯èƒ½çš„é»˜è®¤è¡Œä¸º
      console.log("Language toggle button clicked");
      toggleLanguage();
    });
    console.log("Language toggle button listener attached");
  } else {
    console.error("Language toggle button not found");
  }
});

document
  .getElementById("shortcuts-link")
  .addEventListener("click", function (e) {
    e.preventDefault();
    chrome.runtime.openOptionsPage();
    chrome.tabs.create({ url: "chrome://extensions/shortcuts" });
  });
